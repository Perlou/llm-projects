# 智能聊天机器人

## 项目简介

构建一个具有流式输出、多轮对话能力的智能聊天机器人，提供 Gradio Web 界面，支持多种对话模式和个性化设置。

## 功能特性

- ✅ 流式输出（打字机效果）
- ✅ 多轮对话记忆
- ✅ 系统角色设定
- ✅ 多种对话模式（通用/代码/写作）
- ✅ Gradio Web 界面
- ✅ 对话导出功能
- ✅ Token 计数显示

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置环境变量

```bash
cp .env.example .env
# 编辑 .env 填入 OPENAI_API_KEY
```

### 3. 运行 Web 界面

```bash
python app.py
# 访问 http://localhost:7860
```

### 4. 命令行模式

```bash
python main.py
```

## 使用示例

### Web 界面

````
┌─────────────────────────────────────────────────┐
│  🤖 智能聊天机器人                              │
├─────────────────────────────────────────────────┤
│  模式: [通用助手 ▼]    记忆: [开启 ▼]          │
├─────────────────────────────────────────────────┤
│                                                 │
│  👤 用户: 帮我写一个 Python 快速排序           │
│                                                 │
│  🤖 助手: 好的，这是 Python 快速排序实现：     │
│                                                 │
│  ```python                                      │
│  def quicksort(arr):                           │
│      if len(arr) <= 1:                         │
│          return arr                            │
│      pivot = arr[len(arr) // 2]                │
│      left = [x for x in arr if x < pivot]     │
│      ...                                       │
│  ```                                           │
│                                                 │
├─────────────────────────────────────────────────┤
│  [输入消息...]                        [发送]   │
└─────────────────────────────────────────────────┘
````

## 对话模式

| 模式     | 说明                 | 适用场景 |
| -------- | -------------------- | -------- |
| 通用助手 | 友好、专业的通用对话 | 日常问答 |
| 代码专家 | 专注于编程和技术问题 | 代码开发 |
| 写作助手 | 擅长文案和内容创作   | 文章写作 |
| 翻译专家 | 中英文互译           | 翻译工作 |

## 核心技术

### 流式输出

```python
async def stream_chat(message):
    async for chunk in engine.stream(message):
        yield chunk
```

### 对话记忆

```
用户消息 → 添加到历史 → LLM 处理 → 响应 → 添加到历史
                ↑                              │
                └──────────────────────────────┘
```

## 技术栈

- Python 3.10+
- OpenAI API - LLM
- Gradio - Web 界面
- Rich - 终端美化

## 扩展建议

1. **添加 RAG**：结合知识库回答问题
2. **语音交互**：集成语音识别和合成
3. **多模态**：支持图片理解
4. **持久化**：保存历史对话

## License

MIT License
